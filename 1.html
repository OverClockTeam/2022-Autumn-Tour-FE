<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生信息收集表</title>
    <link rel="stylesheet" href="2.css">
    <script>
        //姓名长度提示
        function judgeName(obj, maxLength, id) {
            var rem = maxLength - obj.value.length;
            if (rem < 0) {
                rem = 0;
            }
            document.getElementById(id).innerHTML = "还可以输入" + rem + "个字";
        }
        function showTip(id) {
            document.getElementById(id).innerHTML = "邮箱格式需要包含@";
        }
        //表单提交,判断邮箱格式
        function submitTable() {
            var name = document.getElementById("xingming").value;
            var age = document.getElementById("nianling").value;
            var pnumber = document.getElementById("dianhua").value;
            var mail = document.getElementById("youxiang").value;
            row = document.getElementById("table").insertRow();
            if (pnumber.length != 11) {
                alert("电话格式错误");
                return false;
            } else
                if (mail.split("@").length == 1) {
                    alert("邮箱地址必须包含@");
                    return false;
                } else
                    if (mail.split("@").length >= 3) {
                        alert("邮箱地址只能包含一个@");
                        return false;
                    } else
                        if (row != null) {
                            cell = row.insertCell();
                            cell.innerHTML = name;
                            cell = row.insertCell();
                            cell.innerHTML = age;
                            cell = row.insertCell();
                            cell.innerHTML = pnumber;
                            cell = row.insertCell();
                            cell.innerHTML = mail;
                            cell = row.insertCell();
                            cell.innerHTML = "<a href='#' onclick='deleteRow(this)'>删除</a>";
                        }
            return false;
        }
        //删除操作
        function deleteRow(r) {
            var i = r.parentNode.parentNode.rowIndex;
            document.getElementById("table").deleteRow(i);
        }
    </script>
</head>

<body>
    <ul>
        <img src="images/art.png" class="absolute" title="钰">
        <li class="left">键盘敲烂 收入过万</li>
        <li class="right">ZhaoYu</li>
        <li class="center">学生信息收集表</li>
    </ul>
    <div>
        <form onsubmit="return submitTable()" id="form">
            <label for="xingming" class="inf"> 姓名： </label>
            <input type="text" name="name" id="xingming" maxLength="10"
                onkeyup="value=value.replace(/[^\u4e00-\u9fa5]/g,''),judgeName(this,maxLength,'div1')" required />
            <br />
            <div class="div1" id="div1"></div>
            <label for="nianling" class="inf"> 年龄： </label>
            <input type="text" oninput="value=value.replace(/[^\d]/g,'')" name="age" id="nianling" required /> <br />
            <label for="dianhua"> 电话： </label>
            <input type="text" oninput="value=value.replace(/[^\d]/g,'')" name="phone" id="dianhua" required /> <br />
            <label for="youxiang"> 邮箱： </label>
            <input type="text" name="mail" id="youxiang" onkeyup="showTip('div2')" required /> <br />
            <div class="div2" id="div2"></div>
            <input name="submit" type="submit" id="submit" value="提交">
        </form>
    </div>
    <table cellspacing="0" id="table">
        <thead>
            <tr>
                <th> 姓名 </th>
                <th> 年龄 </th>
                <th> 电话 </th>
                <th> 邮箱 </th>
                <th> 操作 </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td> 张三 </td>
                <td> 18 </td>
                <td> 16732789844 </td>
                <td> cod@hh.com </td>
                <td><a href="#" onclick="deleteRow(this)"> 删除 </a></td>
            </tr>
            <tr>
                <td> 李四 </td>
                <td> 19 </td>
                <td> 14567893456 </td>
                <td> 996@hh.com </td>
                <td> <a href="#" onclick="deleteRow(this)"> 删除 </a> </td>
            </tr>
            <tr>
                <td> 王五 </td>
                <td> 20 </td>
                <td> 12905614532 </td>
                <td> nice@qq.com </td>
                <td> <a href="#" onclick="deleteRow(this)"> 删除 </a> </td>
            </tr>
        </tbody>
    </table>
</body>

</html>
