<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <link href="style\styles.css" rel="stylesheet">
    <div class="collection">
    <!--nav å¯¼èˆªéƒ¨åˆ†-->
    <div class="headth"><nav>
        <ul>
            <li>
                ğŸŒ¹æ—©ä¸Šå¥½æˆ‘çš„ç¾ä¸½ä½³äººï¼
            </li>
            <li>
                <h1><img src="images/x1.png" class="cha" width="20px">å­¦ç”Ÿä¿¡æ¯æ”¶é›†è¡¨</h1>
            </li>
            <li>
                æ—©èµ·åªä¸ºäº†ç­‰ä½ ğŸŒ¹
            </li>
        </ul>
    </nav></div>
    <!--æ”¶é›†è¡¨-->
    <div class="colle-input"><form class="colle-inputlist">
       <label for="text">å§“åï¼š</label><input type="text" class="colle-inputer" id="inputname" oninput="nameof()"  value=""  @compositionstart="onCompositionStart" @compositionend="onCompositionEnd"><br>
       <label for="text">å¹´é¾„ï¼š</label><input type="number" class="colle-inputer" id="inputage" min="0"><br>
       <label for="text">ç”µè¯ï¼š</label><input type="text" class="colle-inputer" id="inputtel" maxlength="11"><br>
       <label for="text">é‚®ç®±ï¼š</label><input type="text" class="colle-inputer" id="inputmail" oninput="mailadd()" value=""><br>
       <input type="button" value="æäº¤" id="submit" class="colle-inputer" onclick="anywr()">
    </form></div>
    </div>
    <!--ä¿¡æ¯å±•ç¤º-->
    <div class="table"><table>
        <thead><tr>
                <th class="tblock"><label for="text">å§“å</label></th>
                <th class="tblock"><label for="text">å¹´é¾„</label></th>
                <th class="tblock"><label for="text">ç”µè¯</label></th>
                <th class="tblock"><label for="text">é‚®ç®±</label></th>
                <th class="tblock"><label for="text">æ“ä½œ</label></th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr>
                <td class="tblock name"><label for="text">å°¼å¤æ‹‰æ–¯èµµå››</label></td>
                <td class="tblock age"><label for="number">20</label></td>
                <td class="tblock tel"><label for="text">13977935678</label></td>
                <td class="tblock mail"><label for="text">qwq5678@qq.com</label></td>
                <td class="tblock deletebot" onclick="deletetr(this)"><label for="text">åˆ é™¤</label></td>
            </tr>
            <tr>
                <td class="tblock name"><label for="text">çˆ±æ–°è§‰ç½—å¼ ä¸‰é˜¿å·´é˜¿å·´</label></td>
                <td class="tblock age"><label for="number">22</label></td>
                <td class="tblock tel"><label for="text">13877910987</label></td>
                <td class="tblock mail"><label for="text">tat5678@qq.com</label></td>
                <td class="tblock deletebot" onclick="deletetr(this)"><label for="text">åˆ é™¤</label></td>
            </tr>
            <tr>
                <td class="tblock name"><label for="text">é˜¿ç±³å¨…</label></td>
                <td class="tblock age"><label for="number">18</label></td>
                <td class="tblock tel"><label for="text">13677910909</label></td>
                <td class="tblock mail"><label for="text">rds3year@qq.com</label></td>
                <td class="tblock deletebot" onclick="deletetr(this)"><label for="text">åˆ é™¤</label></td>
            </tr>
        </tbody>
    </table></div>

    <script>
        //todo:ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œåˆ é™¤æ•°æ®
        function deletetr(ele){
            ele.parentNode.parentNode.removeChild(ele.parentNode);
        }

        //todo:åˆ¤æ–­è¾“å…¥å§“åæ˜¯å¦è¶…è¿‡åä¸ªå­—ï¼Œå¼¹å‡ºæç¤º
        flag = 1;
        function nameof(){
            var seimei = document.getElementById("inputname");
            seimei.addEventListener('compositionstart', function() {
           flag=1;
        }); 
            
            seimei.addEventListener('compositionend', function(event) {
            if((seimei.value.length > 10)&&(flag==1)){
                flag=0;
                alert('å§“åè¶…è¿‡åä¸ªå­—ï¼');
            }
        });
    }    
        
        //todo:åˆ¤æ–­é‚®ç®±æ ¼å¼æ˜¯å¦æ­£ç¡®
        function mailadd(){
            var meeru = document.getElementById("inputmail").value;
            var aword = 0;
            var pot = 0;
            for(let i =0 ;i < meeru.length ; i++){
                if(meeru[i] == '@'){
                    aword += 1;
                }
                else if(meeru[i] == '.'){
                    pot += 1;
                }
            }
            if((aword > 1)||((aword < 1)&&(pot > 0))){
                alert('é‚®ç®±æ ¼å¼æœ‰è¯¯ï¼');
            }
        }
        //todo:ç‚¹å‡»æäº¤æ—¶ï¼Œæ£€æµ‹å„è¾“å…¥æ˜¯å¦æœ‰è¯¯ï¼Œå¹¶è¿›è¡Œåé¦ˆ
        function anywr(){
            var warnning = false;
            var seimei = document.getElementById("inputname");
            var nenrei = document.getElementById("inputage")
            var ketai = document.getElementById("inputtel");
            var meeru = document.getElementById("inputmail");
            var alp=/[a-zA-Z]/g;
            var num=/[0-9]/g;

            //name
            if(seimei.value.length > 10){
                alert('å§“åè¶…è¿‡åä¸ªå­—ï¼');
                warnning = true;
            }
            else if(seimei.value.length < 1){
                alert('è¯·è¾“å…¥å§“åï¼');
                warnning = true;
            }
            for(let i=0;i<seimei.value.length;i++){
                if(alp.test(seimei.value[i])||num.test(seimei.value[i])){
                    alert('è¯·è¾“å…¥ä¸­æ–‡å§“åï¼');
                    warnning = true;
                    break;
                }
            }
        
            //tel
            if(ketai.value.length!=11){
                alert('ç”µè¯å·ç é•¿åº¦ä¸æ­£ç¡®ï¼');
                warnning = true;
            }
            for(let i=0;i<11;i++){
                if(alp.test(ketai.value[i])){
                    alert('è¯·è¾“å…¥æ­£ç¡®çš„ç”µè¯å·ç ï¼');
                    warnning = true;
                    break;
                }
            }

            //mail
            var aword = 0;
            var pot = 0;
            for(let i =0 ;i < meeru.value.length ; i++){
                if(meeru.value[i] == '@'){
                    aword += 1;
                }
                else if(meeru.value[i] == '.'){
                    pot += 1;
                }
            }
            if((aword > 1)||((aword < 1)&&(pot > 0))||((aword < 1)&&(pot < 1))){
                alert('é‚®ç®±æ ¼å¼æœ‰è¯¯ï¼');
                warnning = true;
            }

            //todoï¼šç”Ÿæˆæ–°èŠ‚ç‚¹
            if(warnning==false){
                var boxy = document.getElementById("tbody");
                var newrow = document.createElement("tr");
                newrow.innerHTML+='<td class="tblock name"><label for="text">'+seimei.value+'</label></td><td class="tblock age"><label for="number">'+nenrei.value+'</label></td><td class="tblock tel"><label for="text">'+ketai.value+'</label></td><td class="tblock mail"><label for="text">'+meeru.value+'</label></td><td class="tblock deletebot" onclick="deletetr(this)"><label for="text">åˆ é™¤</label></td>';
                boxy.appendChild(newrow);
            }
        
        }

        
    </script>
</body>
</html>